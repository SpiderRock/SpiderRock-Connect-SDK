syntax = "proto3";

import "spiderrock_common.proto";


package spiderrock.protobuf;

import "google/protobuf/timestamp.proto";

/*
    OptionAtmMinuteBar records are created once every 10 minutes for all option markets and are visible in SRSE and MLink and are published to the SpiderRock elastic cluster at the same time.
*/    
message OptionAtmMinuteBarSet {
    message PKey {
        
        ExpiryKey ekey = 10;
    }


    MessageMetadata _meta = 1;
    
    PKey pkey = 2;
    int32 minute = 100; // minute since 2000-01-01
    DateKey trading_date = 103;
    string date = 106;
    string time = 109;
    TickerKey ticker = 112;
    double u_prc = 115; // Underlying price
    float years = 118; // Years to expiry
    float rate = 121; // Interest rate
    float sdiv = 124; // Continuous stock dividend
    float ddiv = 127; // Discrete stock dividend value
    double u_prc_ratio = 130; // Implied underlying driver price rate. For options with index/futures underlyings
    float ivol = 133; // atm ivol (atm: strike = fUPrc)
    float ivxx = 136; // fixed strike ivol (ivol @ refStrike)
    float iv_cen = 139; // atm ivol (atm: strike = fUPrc) [eMove/earnings censored]
    float slope = 142; // dVol / dXAxis
    float v_width = 145; // implied volatility width (best market)
    float ref_strike = 148; // reference strike (usually prior day closing uPrc)
    float ivol_hi = 151; // Implied Volatility high value (during bar)
    float ivol_lo = 154; // Implied Volatility low value (during bar)
    float ivxx_hi = 157; // Implied Volatility of Previous Day's ATM strike, high value (during bar)
    float ivxx_lo = 160; // Implied Volatility of Previous Day's ATM strike, low value (during bar)
    float iv_cen_hi = 163; // Censored implied volatility high value (during bar)
    float iv_cen_lo = 166; // Censored implied volatility low value (during bar)
    float sdiv_hi = 169; // Continuous carry rate, high value (during bar)
    float sdiv_lo = 172; // Continuous carry rate, low value (during bar)
    double u_prc_ratio_hi = 175; // Underlying price offset value, high value (during bar)
    double u_prc_ratio_lo = 178; // Underlying price offset value, low value (during bar)
    float slope_hi = 181; // Slope high value (during bar).  The difference between the put and call at 1/2 standard deviation from the ATM point.
    float slope_lo = 184; // Slope low value (during bar).  The difference between the put and call at 1/2 standard deviation from the ATM point.
    float var_swap_fV = 187; // variance swap fair value (estimated by numerical integration over OTM price surface)
    float max_dIVol = 190; // maximum change in IVol (between LSA rec publishes)
    float max_dSDiv = 193; // maximum change is SDiv (between LSA rec publishes)
    YesNo is_eOB = 196; // is end-of-bar (every 10 minutes)
    YesNo is_eOH = 199; // is end-of-hour
    MarketSegment market_segment = 202;
    google.protobuf.Timestamp timestamp = 205;
}


